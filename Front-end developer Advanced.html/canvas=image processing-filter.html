<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"></meta>
        <title>image processing filter</title>
        <script type="text/javascript">
            var cvs,ctx;
            window.onload=function(){
                cvs=document.getElementById("cvs");
                ctx=cvs.getContext("2d");
                //載入影像
                var img=new Image();
                img.src="dog.jpg";
                img.onload=function(){ //註冊load事件,圖片載入完成,才做繪製
                ctx.drawImage(this,0,0, cvs.width, cvs.height);
                };
            };
             function invertColor(){
                var pixels=ctx.getImageData(0,0, cvs.width, cvs.height); //ImagData 物件
                var data=pixels.data; //1個像素佔據4個資料 (bytes)◦ r,g,b,a (範圍0~255)
                for(var i=0;i<data.length;i+=4){
                    data[i]=255-data[i]; //紅色
                    data[i+1]=255-data[i+1]; //綠色
                    data[i+2]=255-data[i+2]; //藍色
                }
                ctx.putImageData(pixels,0,0);
             }
        </script>
    </head>
        <body>
            <div><button oncick="invertColor();">點擊</button></div>
            <canvas id="cvs" width="800" height="600" style="border:1px solid #AAAAAA"></canvas>
        </body>    
</html>